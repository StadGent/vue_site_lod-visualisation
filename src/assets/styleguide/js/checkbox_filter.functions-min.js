"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define(t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.CheckboxFilter=t()}(window,function(){return function(e,r){if("undefined"!=typeof gent_styleguide){r||(r={});var o=e.querySelector(r.filterfield||".checkbox-filter__filter"),i=e.querySelectorAll(r.checkboxes||"div.checkbox")||[],l=e.querySelector(r.selectedContainer||".checkbox-filter__selected"),t=e.querySelector(r.checkboxContainer||".checkbox-filter__checkboxes"),n=e.querySelector(r.openBtn||".checkbox-filter__open"),c=e.querySelector(r.submitBtn||".checkbox-filter__submit"),a=e.querySelector(r.modal||".checkbox-filter__modal"),u=e.querySelectorAll(r.closeBtns||".checkbox-filter__close"),d=e.querySelector(r.resultSpan||".checkbox-filter__result"),s=e.querySelector(r.resultSpanPlaceholder||".checkbox-filter__result-placeholder"),f=e.querySelector(r.resultSpanWrapper||".checkbox-filter__result-wrapper"),h=e.querySelector(r.countSpanWrapper||".checkbox-filter__count-wrapper"),p=e.querySelector(r.countSpan||".checkbox-filter__count"),b=[],y=!1!==r.makeTags||r.makeTags,v=new gent_styleguide.TabTrap(a),k=function(e){if(o){e&&(o.value="");var r=0;t&&(t.style.display="none"),S(function(e){var t=e.checkboxWrapper,n=e.checkbox,c=e.label;c&&-1!==c.innerText.toUpperCase().indexOf(o.value.toUpperCase())?(t.removeAttribute("hidden"),n.removeAttribute("hidden"),r++):(t.setAttribute("hidden","true"),n.setAttribute("hidden","true"))}),t&&(t.style.display=""),_(r),v.setFocusables()}},x=function(e,t){var n=document.createElement("span");n.className="tag filter",n.innerText=t.innerText,n.setAttribute("data-value",e.value);var c=document.createElement("button");return c.type="button",c.innerHTML='<span class="visually-hidden">'+(r.hiddenTagText||"Remove tag")+"</span>",c.addEventListener("click",function(){e.checked=!1,l.removeChild(n)}),n.appendChild(c),n},m=function(){var e=l.children.length;p&&(p.innerText=e),h&&(0<e?h.classList.remove("hidden"):h.classList.add("hidden"))},_=function(e){d&&(d.innerText=e),f&&(""===o.value?f.classList.add("hidden"):f.classList.remove("hidden")),s&&(""===o.value?s.classList.remove("hidden"):s.classList.add("hidden"))},S=function(e){for(var t=i.length;t--;){var n=i[t],c=n.querySelector("input[type=checkbox]"),r=n.querySelector("label");e({checkboxWrapper:n,checkbox:c,label:r})}},q=function(){y&&(l.innerHTML=""),S(function(e){var t=e.checkbox,n=e.label;-1!==b.indexOf(t)?t.checked=!0:t.checked=!1,t.checked&&y&&l.appendChild(x(t,n))})},L=function(e){switch(e.keyCode||e.which){case 27:e.preventDefault(),q(),m();break;case 13:e.preventDefault()}};return b=[],S(function(e){var t=e.checkbox,n=e.label;t.checked&&y&&l.appendChild(x(t,n))}),m(),k(!0),function(){if(o){var e=null;o.addEventListener("input",function(){e&&clearTimeout(e),e=setTimeout(k,200)})}if(S(function(e){var t=e.checkbox,n=e.label;t.addEventListener("change",function(){t.checked?y&&l.appendChild(x(t,n)):y&&function(e){for(var t=l.querySelectorAll(".filter"),n=t.length;n--;)t[n].getAttribute("data-value")===e.value&&l.removeChild(t[n])}(t)})}),n&&n.addEventListener("click",function(e){b=[],S(function(e){var t=e.checkbox;t.checked&&b.push(t)}),document.addEventListener("keydown",L)}),u)for(var t=u.length;t--;)u[t].addEventListener("click",function(){q(),m(),document.removeEventListener("keydown",L)});c&&c.addEventListener("click",m)}(),{}}console.error("You need to include base.js.")}});